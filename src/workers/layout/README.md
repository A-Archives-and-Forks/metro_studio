# workers/layout 目录说明

该目录包含自动排版核心实现，按职责拆分：

- `config.js`
  - 排版默认参数集合（温度衰减、八方向约束、标签松弛、间距硬约束等）
- `optimizeLayout.js`
  - 排版主流程编排（迭代、硬约束、评分、返回 `layoutMeta`）
- `forces.js`
  - 力导向阶段与几何预处理（锚定力、弹簧力、排斥力、交汇扇出、交叉排斥、位移约束）
- `constraints.js`
  - 八方向硬约束、最小边长约束、最小站间距约束
- `linePlanning.js`
  - 线路链路抽取与方向动态规划（转折/短折惩罚）
- `labels.js`
  - 站名候选选位与迭代松弛
- `scoring.js`
  - 评分分解与数值清洗
- `shared.js`
  - 通用数学/几何与空间索引工具（角度归一化、相交判定、距离计算、网格邻域遍历、共享端点判定等）

设计目标：

- 保持原有排版行为不变
- 降低单文件复杂度，便于独立调参与测试
- 通过公共工具复用减少重复定义（九宫格邻域、空间网格建表、边关系判定）
